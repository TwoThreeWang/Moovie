
{{ define "content" }}
<h1 class="page-title">ğŸ“º å‘ç°</h1>
<p class="page-subtitle">å‘ç°å…¨ç½‘æœ€çƒ­é—¨çš„å½±è§†ä½œå“</p>

<!-- çƒ­é—¨åˆ†ç±»å¯¼èˆª -->
<div class="tab-nav" style="margin-bottom: 24px;">
    <a href="javascript:void(0)"
       hx-get="/discover/movie"
       hx-trigger="mouseenter delay:300ms"
       hx-target="#discover-content"
       hx-push-url="true"
       hx-indicator="#loading-indicator"
       class="tab-btn {{ if eq .CurrentType "movie" }}active{{ end }}"
       onclick="updateActiveTab(this)">çƒ­é—¨ç”µå½±</a>
    <a href="javascript:void(0)"
       hx-get="/discover/tv"
       hx-trigger="mouseenter delay:300ms"
       hx-target="#discover-content"
       hx-push-url="true"
       hx-indicator="#loading-indicator"
       class="tab-btn {{ if eq .CurrentType "tv" }}active{{ end }}"
       onclick="updateActiveTab(this)">çƒ­é—¨ç”µè§†å‰§</a>
    <a href="javascript:void(0)"
       hx-get="/discover/show"
       hx-trigger="mouseenter delay:300ms"
       hx-target="#discover-content"
       hx-push-url="true"
       hx-indicator="#loading-indicator"
       class="tab-btn {{ if eq .CurrentType "show" }}active{{ end }}"
       onclick="updateActiveTab(this)">çƒ­é—¨ç»¼è‰º</a>
    <a href="javascript:void(0)"
       hx-get="/discover/cartoon"
       hx-trigger="mouseenter delay:300ms"
       hx-target="#discover-content"
       hx-push-url="true"
       hx-indicator="#loading-indicator"
       class="tab-btn {{ if eq .CurrentType "cartoon" }}active{{ end }}"
       onclick="updateActiveTab(this)">æ—¥æœ¬åŠ¨ç”»</a>
</div>

<div id="discover-content-wrapper" style="position: relative; min-height: 400px;">
    <!-- Loading åŠ¨ç”» (Skeleton) -->
    <div id="loading-indicator" class="htmx-indicator" style="position: absolute; top: 0; left: 0; width: 100%; z-index: 10;">
        <div class="movie-grid discover-grid">
            {{ range (seq 1 12) }}
            <div class="movie-card skeleton-card">
                <div class="movie-poster skeleton" style="aspect-ratio: 2/3; background: #e0e0e0; border-radius: 8px;"></div>
                <div class="movie-info">
                    <div class="skeleton" style="height: 1rem; width: 80%; background: #e0e0e0; margin-top: 8px; border-radius: 4px;"></div>
                </div>
            </div>
            {{ end }}
        </div>
    </div>

    <!-- å†…å®¹åŒºåŸŸ -->
    <div id="discover-content"
         hx-get="/discover?type={{ .CurrentType }}"
         hx-trigger="load"
         hx-indicator="#loading-indicator">
        <!-- åˆå§‹åŠ è½½é€šè¿‡ htmx è§¦å‘ -->
    </div>
</div>

<style>
    .htmx-indicator {
        display: none;
    }
    .htmx-request .htmx-indicator {
        display: block;
    }
    .htmx-request#discover-content {
        opacity: 0.5;
    }
    .skeleton {
        animation: skeleton-loading 1.5s infinite linear;
    }
    @keyframes skeleton-loading {
        0% { background-color: rgba(200, 200, 200, 0.1); }
        50% { background-color: rgba(200, 200, 200, 0.3); }
        100% { background-color: rgba(200, 200, 200, 0.1); }
    }
</style>

<script>
    function updateActiveTab(el) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        el.classList.add('active');
    }
</script>

{{ end }}
