{{ define "content" }}
<div class="content-page">
    <h1 class="page-title">更新记录 (Changelog)</h1>
    <p class="lead-text">所有重要的更新、修改和修复都将记录在此页面中。</p>

    <div class="changelog-container">
        <!-- v3.2.0 -->
        <section class="changelog-item">
            <div class="version-badge">v3.2.0 <small>2026-02-12</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li><strong>AI 智能推荐系统 (AI-Powered)</strong>：
                        <ul>
                            <li><strong>Moovie 推荐语</strong>：在电影详情页引入 AI 深度生成的个性化推荐语，基于 LLM 对剧情内核与艺术风格的解析，为您揭示每部作品的独特魅力。</li>
                            <li><strong>深度语义向量匹配</strong>：底层推荐引擎全面接入 <code>pgvector</code> 向量技术，支持基于剧情语义、叙事结构及导演手法的多维相关性推荐，大幅提升相似影片的发现精度。</li>
                        </ul>
                    </li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li><strong>剧照展示引擎重构</strong>：针对移动端（尤其是安卓设备）进行了底层交互重写。将“展开/收起”逻辑由 JavaScript 驱动迁移至<strong>纯 CSS Checkbox 状态引擎</strong>，从根本上解决了脚本兼容性、点击失效及响应延迟问题。</li>
                    <li><strong>触控响应性能优化</strong>：为交互组件引入 <code>touch-action: manipulation</code> 属性，彻底消除移动端浏览器默认的 300ms 点击延迟，提供原生级的灵敏触控体验。</li>
                </ul>
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li><strong>跨设备脚本容错</strong>：修复了在部分旧版移动浏览器中因不支持 <code>scrollIntoView</code> 高级配置对象而导致的页面滚动逻辑中断问题。</li>
                </ul>
            </div>
        </section>
        <!-- v3.1.3 -->
        <section class="changelog-item">
            <div class="version-badge">v3.1.3 <small>2026-02-11</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li><strong>高清剧照展示</strong>：详情页接入 TMDB 剧照 API，支持高清剧照的异步采集与展示。内置轻量级 Lightbox 图片查看器，支持大图浏览与手势/快捷键操作</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li><strong>海报代理逻辑优化</strong>：新增 <code>contains</code> 模板函数，智能识别海报来源。针对 TMDB 源的海报直接加载，不再通过中转代理，提升海报加载速度与稳定性</li>
                    <li><strong>全局海报适配</strong>：完成电影详情页、个性化推荐、仪表盘等全站海报组件的动态代理适配</li>
                </ul>
            </div>
        </section>

        <!-- v3.1.2 -->
        <section class="changelog-item">
            <div class="version-badge">v3.1.2 <small>2026-02-08</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li><strong>广告合作页面</strong>：新增独立的广告合作申请页，上线投放优势、广告形式说明及全球化支付支持</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li><strong>搜索排序默认优化</strong>：默认启用“按加载速度”智能排序，简化 UI 交互，提升搜索效率</li>
                    <li><strong>全局加载效果</strong>：引入全新的页面级 Loading 指示器，优化数据加载时的视觉平滑度</li>
                    <li><strong>分类筛选体验</strong>：重构手机端分类筛选组件，加入动态展开/折叠功能，适配触屏操作</li>
                </ul>
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li><strong>模态框交互修复</strong>：解决了部分弹窗点击遮罩层意外关闭的问题，并统一样式</li>
                    <li><strong>模板加载错误</strong>：修复了“为你推荐”页面在分页加载过程中可能出现的模板解析异常</li>
                </ul>
            </div>
        </section>

        <!-- v3.1.1 -->
        <section class="changelog-item">
            <div class="version-badge">v3.1.1 <small>2026-02-02</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li><strong>用户标记系统重构</strong>：全面升级“想看/已看”功能，支持更加便捷的状态标记与管理</li>
                    <li><strong>评分与短评功能</strong>：新增弹窗式评分与短评编辑器，支持在仪表盘及电影详情页快速添加或修改影评</li>
                    <li><strong>品牌升级</strong>：系统品牌增加中文名称“Moovie 影牛”</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li><strong>仪表盘视觉焕新</strong>：统计栏图标由 Emoji 升级为 SVG 图标，界面更加专业统一</li>
                    <li><strong>短评展示优化</strong>：改进用户评论列表排版，评分与元数据显示更清晰</li>
                    <li><strong>移动端体验优化</strong>：优化“已看”列表在移动端的操作按钮布局</li>
                    <li><strong>缓存性能提升</strong>：引入更精细的缓存过期策略，提升系统响应速度</li>
                    <li><strong>优化推荐逻辑</strong>：个性化推荐算法优化，提升推荐准确性</li>
                </ul>
            </div>
        </section>

        <!-- v3.1.0 -->
        <section class="changelog-item">
            <div class="version-badge">v3.1.0 <small>2026-01-27</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>全面增强“为你推荐”页面：引入沉浸式 Hero 电影展示、多类别推荐列表和改进的空状态提示</li>
                    <li>新增相似电影推荐功能，并在电影详情页直接集成</li>
                    <li>为推荐系统增加 SEO 友好的结构化数据（导演、海报等）</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>优化相似原因生成逻辑，提升推荐准确性</li>
                    <li>引入缓存机制（特别是在相似电影推荐中），显著提升响应速度</li>
                    <li>优化数据库连接池配置</li>
                    <li>重构推荐页 UI 布局，提供更直步观的长列表展示</li>
                </ul>
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li>修复部署时环境变量配置不生效的问题</li>
                </ul>
            </div>
        </section>

        <!-- v3.0.1 -->
        <section class="changelog-item">
            <div class="version-badge">v3.0.1 <small>2026-01-23</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>添加视频加载速度显示功能，使用增量平均算法基于其他用户的实际播放反馈来计算平均速度，优化用户体验</li>
                    <li>为视频搜索结果为空和缺少播放链接的情况添加具体错误信息</li>
                    <li>实现HTMX预加载功能，优化页面切换体验</li>
                    <li>为按钮和标签添加鼠标悬停延迟触发功能</li>
                    <li>添加豆瓣Rexxar API作为主要爬取方案，增加爬取成功率</li>
                    <li>实现搜索结果缓存和分页功能</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>跳过采集没有播放链接的视频项，提高数据质量</li>
                    <li>为评论标题链接添加title属性，提升可访问性</li>
                    <li>添加豆瓣ID有效性校验函数，增强数据准确性</li>
                </ul>
            </div>
        </section>

        <!-- v3.0.0 -->
        <section class="changelog-item">
            <div class="version-badge">v3.0.0 <small>2026-01-17</small></div>
            <div class="changelog-details">
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>从头整理了整站的全部代码，优化了代码结构，增加了好多新功能，并且开源了全部代码。</li>
                </ul>
            </div>
        </section>

        <!-- v2.0.0 -->
        <section class="changelog-item">
            <div class="version-badge">v2.0.0 <small>2025-12-14</small></div>
            <div class="changelog-details">
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>重构前端为Vue3单页应用并优化后端API</li>
                </ul>
            </div>
        </section>

        <!-- v1.2.5 -->
        <section class="changelog-item">
            <div class="version-badge">v1.2.5 <small>2025-12-12</small></div>
            <div class="changelog-details">
                <h3>🗑️ 移除 (Removed)</h3>
                <ul>
                    <li>收到通知，已移除部分纯福利类资源网、屏蔽福利相关分类资源</li>
                </ul>
            </div>
        </section>

        <!-- v1.2.4 -->
        <section class="changelog-item">
            <div class="version-badge">v1.2.4 <small>2025-12-10</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>新增八个资源网</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>在关键词区域添加"点击展开查看"的提示文本</li>
                    <li>观影记录区域添加"点击影片右下角 ☑ 可删除观影记录"的提示文本</li>
                </ul>
            </div>
        </section>

        <!-- v1.2.3 -->
        <section class="changelog-item">
            <div class="version-badge">v1.2.3 <small>2025-12-03</small></div>
            <div class="changelog-details">
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>实现首页关键词区块的手风琴折叠效果并优化样式</li>
                </ul>
            </div>
        </section>

        <!-- v1.2.2 -->
        <section class="changelog-item">
            <div class="version-badge">v1.2.2 <small>2025-11-26</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>在搜索路由中增加版权屏蔽功能</li>
                </ul>
            </div>
        </section>

        <!-- v1.2.1 -->
        <section class="changelog-item">
            <div class="version-badge">v1.2.1 <small>2025-11-09</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>新增多个资源网，目前资源网总量 33 个</li>
                </ul>
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li>修复播放页面更多视频源显示为空问题</li>
                </ul>
            </div>
        </section>

        <!-- v1.2.0 -->
        <section class="changelog-item">
            <div class="version-badge">v1.2.0 <small>2025-11-08</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>新增基于观影记录的影片推荐功能</li>
                </ul>
            </div>
        </section>

        <!-- v1.1.3 -->
        <section class="changelog-item">
            <div class="version-badge">v1.1.3 <small>2025-11-07</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>新增想法建议页面，用户可匿名提交建议或留下联系方式</li>
                    <li>新增三个资源网</li>
                </ul>
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li>修复视频播放时可能出现的卡顿问题</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>优化视频播放性能，减少加载时间和缓冲等待</li>
                    <li>为搜索结果添加分页功能，避免一次返回过多数据导致性能问题</li>
                </ul>
            </div>
        </section>

        <!-- v1.1.2 -->
        <section class="changelog-item">
            <div class="version-badge">v1.1.2 <small>2025-11-06</small></div>
            <div class="changelog-details">
                <p>重构播放器实现，使用ArtPlayer替换DPlayer，提供更稳定的播放体验</p>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>替换DPlayer为ArtPlayer并优化播放体验</li>
                </ul>
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li>改进缓冲和错误处理机制</li>
                </ul>
            </div>
        </section>

        <!-- v1.1.1 -->
        <section class="changelog-item">
            <div class="version-badge">v1.1.1 <small>2025-11-05</small></div>
            <div class="changelog-details">
                <p>优化视频播放器配置和卡顿处理逻辑</p>
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>添加自动获取焦点和互斥播放功能提升用户体验</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>优化HLS缓冲策略和网络性能参数减少卡顿</li>
                </ul>
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li>改进卡顿检测逻辑，避免频繁强制seek操作</li>
                </ul>
            </div>
        </section>

        <!-- v1.1.0 -->
        <section class="changelog-item">
            <div class="version-badge">v1.1.0 <small>2025-11-04</small></div>
            <div class="changelog-details">
                <p>全面优化搜索、缓存与播放体验，提升站点性能与响应速度</p>
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>实现搜索缓存功能，显著提升搜索性能</li>
                    <li>添加每日定时任务清理低频与过期缓存</li>
                    <li>实现热门搜索词与最近搜索词展示</li>
                    <li>视频测速升级为综合视频质量测试</li>
                </ul>
                <h3>🛠️ 变更/优化 (Changed/Improved)</h3>
                <ul>
                    <li>重构爬虫服务，使用统一的数据结构</li>
                    <li>优化搜索与播放页面的关键词上下文展示</li>
                    <li>优化热门页面分类展示与视频质量检测逻辑</li>
                </ul>
            </div>
        </section>

        <!-- v1.0.3 -->
        <section class="changelog-item">
            <div class="version-badge">v1.0.3 <small>2025-11-02</small></div>
            <div class="changelog-details">
                <h3>🐞 修复 (Fixed)</h3>
                <ul>
                    <li>将广告脚本改为延迟加载以提高页面性能</li>
                    <li>为视频播放器添加主题色、音量控制和播放速度选项</li>
                </ul>
            </div>
        </section>

        <!-- v1.0.2 -->
        <section class="changelog-item">
            <div class="version-badge">v1.0.2 <small>2025-10-22</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>添加视频测速功能以优化视频播放体验</li>
                </ul>
            </div>
        </section>

        <!-- v1.0.1 -->
        <section class="changelog-item">
            <div class="version-badge">v1.0.1 <small>2025-10-19</small></div>
            <div class="changelog-details">
                <h3>✨ 新增 (Added)</h3>
                <ul>
                    <li>新增下载 M3U8 功能</li>
                </ul>
            </div>
        </section>

        <!-- v1.0 -->
        <section class="changelog-item">
            <div class="version-badge">v1.0 <small>2025-10-18</small></div>
            <div class="changelog-details">
                <p>重新构建全新的前端页面，更简约现代人性化。</p>
                <ul>
                    <li>初始版本上线</li>
                </ul>
            </div>
        </section>
    </div>
</div>

<style>
.changelog-container {
    margin-top: 2rem;
    position: relative;
}

.changelog-item {
    margin-bottom: 2.5rem;
    padding-left: 20px;
    border-left: 2px solid var(--primary-color, #ff4d4d);
    position: relative;
}

.changelog-item::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 5px;
    width: 12px;
    height: 12px;
    background: var(--primary-color, #ff4d4d);
    border-radius: 50%;
}

.version-badge {
    font-size: 1.25rem;
    font-weight: bold;
    color: var(--primary-color, #ff4d4d);
    margin-bottom: 0.5rem;
}

.version-badge small {
    font-size: 0.9rem;
    color: var(--text-muted, #888);
    margin-left: 10px;
    font-weight: normal;
}

.changelog-details h3 {
    font-size: 1.1rem;
    margin: 1rem 0 0.5rem 0;
}

.changelog-details ul {
    margin: 0;
    padding-left: 1.5rem;
}

.changelog-details li {
    margin-bottom: 0.3rem;
    color: var(--text-color-secondary, #666);
}
</style>
{{ end }}
