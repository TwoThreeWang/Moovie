{{ define "content" }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Movie",
  "name": "{{ .Movie.Title }}",
  "image": "{{ .Movie.Poster }}",
  "datePublished": "{{ .Movie.Year }}",
  {{ if .Movie.Rating }}
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ .Movie.Rating }}",
    "bestRating": "10"
  },
  {{ end }}
  "description": "{{ .Movie.Summary | js }}"
}
</script>

<div class="movie-page">
    <!-- 主要内容区：左海报+右信息 -->
    <div class="movie-header">
        <!-- 海报 -->
        <div class="movie-poster-col">
            <img src="{{ .Movie.Poster }}" alt="{{ .Movie.Title }}" class="movie-poster-img" onerror="this.onerror=null;this.src='/static/img/placeholder.jpg'">
        </div>

        <!-- 信息列 -->
        <div class="movie-info-col">
            <h1 class="movie-name">{{ .Movie.Title }}{{ if .Movie.Year }} <span class="movie-year-text">({{ .Movie.Year }})</span>{{ end }}</h1>

            {{ if .Movie.OriginalTitle }}
            <div class="movie-alt-name">{{ .Movie.OriginalTitle }}</div>
            {{ end }}

            <!-- 详细信息列表 -->
            <div class="movie-attrs">
                {{ if .Movie.Directors }}
                <div class="attr-row">
                    <span class="attr-label">导演:</span>
                    <span class="attr-value">{{ range $i, $d := .Movie.Directors }}{{ if $i }} / {{ end }}{{ $d.Name }}{{ end }}</span>
                </div>
                {{ end }}

                {{ if .Movie.Actors }}
                <div class="attr-row">
                    <span class="attr-label">主演:</span>
                    <span class="attr-value">{{ range $i, $a := .Movie.Actors }}{{ if $i }} / {{ end }}{{ $a.Name }}{{ end }}</span>
                </div>
                {{ end }}

                {{ if .Movie.Genres }}
                <div class="attr-row">
                    <span class="attr-label">类型:</span>
                    <span class="attr-value">{{ range $i, $g := .Movie.Genres }}{{ if $i }} / {{ end }}{{ $g }}{{ end }}</span>
                </div>
                {{ end }}

                {{ if .Movie.Countries }}
                <div class="attr-row">
                    <span class="attr-label">地区:</span>
                    <span class="attr-value">{{ range $i, $c := .Movie.Countries }}{{ if $i }} / {{ end }}{{ $c }}{{ end }}</span>
                </div>
                {{ end }}

                {{ if .Movie.Duration }}
                <div class="attr-row">
                    <span class="attr-label">片长:</span>
                    <span class="attr-value">{{ .Movie.Duration }}</span>
                </div>
                {{ end }}

                {{ if .Movie.IMDbID }}
                <div class="attr-row">
                    <span class="attr-label">IMDb:</span>
                    <span class="attr-value">{{ .Movie.IMDbID }}</span>
                </div>
                {{ end }}
            </div>
        </div>

        <!-- 评分与操作 -->
        <div class="movie-rating-col">
            {{ if .Movie.Rating }}
            <div class="rating-block">
                <div class="rating-title">豆瓣评分</div>
                <div class="rating-num">{{ .Movie.Rating }}</div>
                <div class="rating-stars">
                    ★★★★★
                </div>
            </div>
            {{ end }}

            <div class="movie-actions">
                <a href="/play/{{ .Movie.DoubanID }}" class="btn btn-primary">▶ 播放</a>
                {{ template "favorite_btn.html" (dict "MovieID" .Movie.ID "IsFavorited" .IsFavorited) }}
            </div>
        </div>
    </div>

    <!-- 剧情简介 -->
    {{ if .Movie.Summary }}
    <div class="movie-section">
        <h2 class="section-title">剧情简介</h2>
        <p class="movie-summary">{{ .Movie.Summary }}</p>
    </div>
    {{ end }}
</div>
{{ end }}
