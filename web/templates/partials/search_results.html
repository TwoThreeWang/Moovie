<div id="search-container">
    {{ if .FilteredCount }}
    <div class="copyright-notice">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
        <span>å› ç‰ˆæƒåŸå› ï¼Œ{{ .FilteredCount }} æ¡ç›¸å…³å†…å®¹å·²è¢«éšè—</span>
    </div>
    {{ end }}
    {{ if .Results }}
    <div class="search-result-grid">
        {{ range .Results }}
        <a href="/play/{{ .SourceKey }}/{{ .VodId }}{{ if .VodDoubanId }}?douban_id={{ .VodDoubanId }}{{ end }}" class="search-result-card">
            <div class="card-poster">
                <img src="{{ .VodPic }}" alt="{{ .VodName }}" loading="lazy" onerror="this.onerror=null;this.src='/static/img/placeholder.svg'" referrerpolicy="no-referrer">
                {{ if .VodRemarks }}<span class="card-badge">{{ .VodRemarks }}</span>{{ end }}
            </div>
            <div class="card-content">
                <h3 class="card-title">{{ .VodName }}</h3>
                <div class="card-meta-row">
                    {{ if .VodYear }}<span class="card-year">{{ .VodYear }}</span>{{ end }}
                    {{ if .VodArea }}<span class="card-region">{{ .VodArea }}</span>{{ end }}
                    {{ if .TypeName }}<span class="card-type">{{ .TypeName }}</span>{{ end }}
                </div>
                {{ if .VodActor }}
                <p class="card-director">ä¸»æ¼”: {{ .VodActor }}</p>
                {{ end }}
                <div class="card-sources">
                    <span class="source-item active">
                        {{ .SourceKey }}
                    </span>
                    {{ if .VodRemarks }}<span class="card-remarks">{{ .VodRemarks }}</span>{{ end }}
                </div>
            </div>
        </a>
        {{ end }}
    </div>

    <!-- åˆ†é¡µå¯¼èˆª -->
    <div class="pagination-container" id="pagination">
        {{ if gt .CurrentPage 1 }}
        <button class="pagination-btn" 
                hx-get="/api/htmx/search?kw={{ .Keyword }}&page={{ .PrevPage }}{{ if .Bypass }}&bypass=1{{ end }}"
                hx-target="#search-container"
                hx-swap="innerHTML show:window:top"
                hx-trigger="mouseenter delay:300ms"
                hx-indicator="#pagination-loading">
            ä¸Šä¸€é¡µ
        </button>
        {{ end }}
        
        <span class="pagination-info">ç¬¬ {{ .CurrentPage }} é¡µ</span>
        
        {{ if .HasNextPage }}
        <button class="pagination-btn" 
                hx-get="/api/htmx/search?kw={{ .Keyword }}&page={{ .NextPage }}{{ if .Bypass }}&bypass=1{{ end }}"
                hx-target="#search-container"
                hx-swap="innerHTML show:window:top"
                hx-trigger="mouseenter delay:300ms"
                hx-indicator="#pagination-loading">
            ä¸‹ä¸€é¡µ
        </button>
        {{ end }}
    </div>

    <div id="pagination-loading" class="htmx-indicator pagination-loading">
        <div class="loading-spinner-small"></div>
    </div>
    {{ else }}
    <div class="empty-state">
        <p>ğŸ˜• æœªæ‰¾åˆ°ç›¸å…³ç»“æœ</p>
        <p>è¯•è¯•å…¶ä»–å…³é”®è¯ï¼Œæˆ– <b><a href="/feedback">å‘Šè¯‰æˆ‘ä»¬</a></b> æ‚¨æƒ³æ‰¾çš„å½±ç‰‡</p>
    </div>
    {{ end }}
</div>