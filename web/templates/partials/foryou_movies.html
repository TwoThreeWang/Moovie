{{/* ä¸ªæ€§åŒ–æ¨èç”µå½±åˆ—è¡¨ */}}
{{ if .Movies }}
<div class="movie-grid discover-grid">
    {{ range .Movies }}
    <div class="movie-card">
        <a href="/movie/{{ .DoubanID }}">
            <div class="movie-poster">
                <img src="https://image.baidu.com/search/down?url={{ .Poster }}" alt="{{ .Title }}" loading="lazy" onerror="this.onerror=null;this.src='/static/img/placeholder.svg'">
                {{ if .Rating }}
                <span class="movie-rating">{{ .Rating }}</span>
                {{ end }}
            </div>
            <div class="movie-info">
                <span class="movie-title">{{ .Title }}</span>
                <span class="foryou-meta">
                    {{ if .Year }}{{ .Year }}{{ end }}
                    {{ if .Genres }} Â· {{ .Genres }}{{ end }}
                </span>
            </div>
        </a>
    </div>
    {{ end }}
</div>
{{ else if .NeedLogin }}
<div class="foryou-empty">
    <p>ğŸ”’ è¯·å…ˆç™»å½•ä»¥è·å–ä¸ªæ€§åŒ–æ¨è</p>
    <a href="/auth/login?redirect=/foryou" class="btn btn-primary">ç«‹å³ç™»å½•</a>
</div>
{{ else if .NoData }}
<div class="foryou-empty">
    <p>ğŸ“º å¤šçœ‹å‡ éƒ¨ç”µå½±åï¼Œæˆ‘å°±èƒ½æ›´å¥½åœ°äº†è§£ä½ çš„å£å‘³å•¦ï¼</p>
    <a href="/discover" class="btn btn-secondary">å»å‘ç°å¥½ç‰‡</a>
</div>
{{ else }}
<div class="foryou-empty">
    <p>æš‚æ— æ¨è</p>
</div>
{{ end }}

<style>
.foryou-meta {
    font-size: 0.75rem;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.foryou-empty {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-muted);
}

.foryou-empty p {
    font-size: 1rem;
    margin-bottom: 20px;
}

.foryou-empty .btn {
    display: inline-block;
    padding: 10px 24px;
    border-radius: 8px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
}

.foryou-empty .btn-primary {
    background: var(--primary);
    color: white;
}

.foryou-empty .btn-secondary {
    background: var(--bg-secondary);
    color: var(--text);
    border: 1px solid var(--border);
}

@media (max-width: 480px) {
    .foryou-meta {
        display: none;
    }
}
</style>
